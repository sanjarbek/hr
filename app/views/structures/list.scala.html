<div class="row">
    <div class="col-sm-6 col-md-6">
        <div class="row">
            <div class="col-sm-12">
                <div class="panel panel-default">
                    <div class="row">
                        <div class="col-sm-11 col-sm-offset-1">
                            <br>
                            <button ng-click="createParent()" class="btn btn-primary">
                                <span class="glyphicon glyphicon-plus"></span> Добавить корневую
                            </button>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-11">
                            <br/>
                            <treecontrol class="tree-classic"
                            tree-model="dataForTheTree"
                            options="treeOptions"
                            >
                                {{node.name}}
                                <div class="pull-right">
                                    <a ng-click="addChild(node)" ng-show="hasChildren(node.structure_type)" >
                                        <span class="glyphicon glyphicon-plus-sign"></span>
                                    </a>
                                    <a ng-click="editNode(node, $parentNode)" ng-show="!node.is_position" >
                                        <span class="glyphicon glyphicon-edit"></span>
                                    </a>
                                </div>
                            </treecontrol>
                            <br/>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-sm-6 col-md-6">
        <div class="panel panel-default">
            <div class="panel-heading">
            @Messages("Создать новую организационную структуру")
            </div>
            <div class="panel-body">
                <form class="form-horizontal">
                    <fieldset>
                        <div class="form-group form-group-sm">
                            <label for="parent_id" class="col-sm-5 col-md-4 control-label">Вышестоящая структура</label>
                            <div class="col-sm-7">
                                <input type="text" value="{{ parentStructure.name }}" required class="form-control" readonly />
                            </div>
                            <span class="help-inline"></span>
                        </div>
                        <div class="form-group form-group-sm">
                            <label for="name" class="col-sm-5 col-md-4 control-label">Название</label>
                            <div class="col-sm-7">
                                <input required class="form-control" type="text" name="name" ng-model="newStructureForm.name"/>
                            </div>
                            <span class="help-inline"></span>
                        </div>
                        <div class="form-group form-group-sm">
                            <label for="fullname" class="col-sm-5 col-md-4 control-label">Полное название</label>
                            <div class="col-sm-7">
                                <textarea required class="form-control" type="text" name="fullname" ng-model="newStructureForm.fullname">

                                </textarea>
                            </div>
                            <span class="help-inline"></span>
                        </div>
                        <div class="form-group form-group-sm">
                            <label for="structure_type" class="col-sm-5 col-md-4 control-label">Тип</label>
                            <div class="col-sm-7">
                                <select class="form-control" name="structure_type" ng-model="newStructureForm.structure_type"
                                ng-options="structure_item.id as structure_item.name for structure_item in structure_types">
                                    <option value="">Выберите ...</option>
                                </select>
                            </div>
                            <span class="help-inline"></span>
                        </div>
                        <div class="form-group form-group-sm" ng-show="newStructureForm.structure_type==4">
                            <label for="salary" class="col-sm-5 col-md-4 control-label">Оклад</label>
                            <div class="col-sm-7">
                                <input class="form-control" type="number" min="0" name="salary" value="0" ng-model="newStructureForm.salary"/>
                            </div>
                            <span class="help-inline"></span>
                        </div>
                        <div class="form-group form-group-sm" ng-show="newStructureForm.structure_type==1 || newStructureForm.structure_type==2 ">
                            <label for="coefficient" class="col-sm-5 col-md-4 control-label">Районный коэффициент</label>
                            <div class="col-sm-7">
                                <input class="form-control" type="number" min="0" value="0" name="coefficient" ng-model="newStructureForm.coefficient"/>
                            </div>
                            <span class="help-inline"></span>
                        </div>
                        <div class="form-group form-group-sm" ng-show="newStructureForm.structure_type==4">
                            <label for="position_type" class="col-sm-5 col-md-4 control-label">Категория должности</label>
                            <div class="col-sm-7">
                                <div class="input-group">
                                    <select class="form-control" name="position_type" ng-model="newStructureForm.position_type"
                                    ng-options="position.id as position.name for position in position_types">
                                        <option value="">Выберите ...</option>
                                    </select>
                                    <span class="input-group-btn">
                                        <button class="btn btn-default btn-add" ng-click="openPositionTypeModal()" type="button"><span class="glyphicon glyphicon-plus"></span></button>
                                    </span>
                                </div>
                            </div>
                            <span class="help-inline"></span>
                        </div>
                        <div class="form-group form-group-sm" >
                            <label for="status" class="col-sm-5 col-md-4 control-label">Статус</label>
                            <div class="col-sm-7">
                                <select class="form-control" name="status" ng-model="newStructureForm.status"
                                ng-options="status.id as status.name for status in statuses"></select>
                            </div>
                            <span class="help-inline"></span>
                        </div>
                    </fieldset>
                    <p><input type="submit" class="btn btn-primary pull-right" value='@Messages("Сохранить")' ng-click="actionMode()"></p>
                </form>
            </div>
        </div>
    </div>
</div>


<script type="text/ng-template" id="positionTypeModalContent.html">
<div class="modal-header">
<h4 class="modal-title">Новая категория должности</h4>
</div>
<form name="positionTypeForm" class="form-horizontal" novalidate>
<div class="modal-body">
<div class="form-group">
<div class="col-sm-12 col-md-12 col-lg-12">
<label for="name" class="control-label">Название категории:</label>
<input required class="form-control" type="text" ng-model="newPositionTypeForm.name"/>
</div>
</div>
</div>
<div class="modal-footer">
<button ng-disabled="!positionTypeForm.$valid" class="btn btn-primary" ng-click="savePositionType()">Создать</button>
<button class="btn btn-default" ng-click="cancel()">Отменить</button>
</div>
</form>
</script>
