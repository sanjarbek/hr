<!DOCTYPE html>

<html ng-app="app">
    <head>
        <link rel='stylesheet' href='@routes.WebJarAssets.at(WebJarAssets.locate("bootstrap.min.css"))'>
        <link rel='stylesheet' href='@routes.WebJarAssets.at(WebJarAssets.locate("ng-table.min.css"))'>
        <link rel='stylesheet' href='@routes.WebJarAssets.at(WebJarAssets.locate("pnotify.core.css"))'>
        <link rel='stylesheet' href='@routes.WebJarAssets.at(WebJarAssets.locate("pnotify.buttons.css"))'>
        <link rel='stylesheet' href='@routes.WebJarAssets.at(WebJarAssets.locate("pnotify.history.css"))'>
        <link rel='stylesheet' href='@routes.Assets.at(("stylesheets/main.css"))'>
        <link rel='stylesheet' href='@routes.Assets.at(("stylesheets/custom_bootstrap.css"))'>
        <link rel='stylesheet' href='@routes.Assets.at(("stylesheets/treeGrid.css"))'>
        @*<link rel='stylesheet' href='@routes.Assets.at(("stylesheets/animate.css"))'>*@
    </head>
    <body>
        <header>
            <nav class="navbar navbar-static-top navbar-default" role="navigation">
                <div class="container-fluid">
                    <a href="#" class="navbar-btn sidebar-toggle" data-toggle="offcanvas" role="button">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                        <!-- Brand and toggle get grouped for better mobile display -->
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                    </div>
                    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                        <ul class="nav navbar-nav">
                            <li ng-class="{active: $state.includes('employees')}"><a ui-sref="employees.list">Сотрудники</a></li>
                            <li><a href="#">Отчеты</a></li>
                            <li><a href="#">Штатное расписание</a></li>
                        </ul>
                        <ul class="nav navbar-nav navbar-right">
                            <li class="dropdown">
                                <a class="dropdown-toggle" data-toggle="dropdown">Справочники <span class="caret"></span></a>
                                <ul class="dropdown-menu" role="menu">
                                    <li><a ui-sref="relationship_types.list">Виды родства</a></li>
                                    <li><a ui-sref="positions.list">Должности</a></li>
                                    <li><a ui-sref="position_categories.list">Категории должностей</a></li>
                                    <li><a ui-sref="office_types.list">Виды офисов</a></li>
                                    <li><a ui-sref="offices.list">Офисы</a></li>
                                    <li><a ui-sref="departments.list">Структура</a></li>
                                    <li><a ui-sref="contract_types.list">Виды договоров</a></li>
                                    <li><a ui-sref="institutions.list">Учебные заведения</a></li>
                                </ul>
                            </li>
                            <li class="#"><a >Настройки</a></li>
                        </ul>
                    </div>
                </div>
            </nav>
        </header>

        <div class="container-fluid">
            <div class="row">
                <div class="col-sm-12">
                    <div ui-view ng-animate="'view'"></div>
                </div>
            </div>

            <footer>
                <div class="row">
                    <div class="col-sm-12">
                        <h6>Статус соединения к серверу: <span id="server-status"></span></h6>
                    </div>
                </div>
            </footer>
        </div>

        <script type='text/javascript' src='@routes.WebJarAssets.at(WebJarAssets.locate("jquery.min.js"))'></script>
        <script type='text/javascript' src='@routes.WebJarAssets.at(WebJarAssets.locate("bootstrap.min.js"))'></script>
        <script type='text/javascript' src='@routes.WebJarAssets.at(WebJarAssets.locate("pnotify.core.js"))'></script>
        <script type='text/javascript' src='@routes.WebJarAssets.at(WebJarAssets.locate("pnotify.desktop.js"))'></script>
        <script type='text/javascript' src='@routes.WebJarAssets.at(WebJarAssets.locate("pnotify.history.js"))'></script>
        <script type='text/javascript' src='@routes.WebJarAssets.at(WebJarAssets.locate("pnotify.tooltip.js"))'></script>
        <script type='text/javascript' src='@routes.WebJarAssets.at(WebJarAssets.locate("pnotify.buttons.js"))'></script>
        <script type='text/javascript' src='@routes.WebJarAssets.at(WebJarAssets.locate("angular.min.js"))'></script>
        <script type="text/javascript" src='@routes.WebJarAssets.at(WebJarAssets.locate("angular-ui-router.min.js"))'></script>
        <script type="text/javascript" src='@routes.WebJarAssets.at(WebJarAssets.locate("ui-bootstrap.min.js"))'></script>
        <script type="text/javascript" src='@routes.WebJarAssets.at(WebJarAssets.locate("ui-bootstrap-tpls.min.js"))'></script>
        <script type="text/javascript" src='@routes.WebJarAssets.at(WebJarAssets.locate("ng-table.min.js"))'></script>
        <script type='text/javascript' src='@routes.Assets.at("javascripts/reconnecting-websocket.js")'></script>
        <script type='text/javascript' src='@routes.Assets.at("javascripts/tree-grid-directive.js")'></script>
        <script type='text/javascript' src='@routes.Assets.at("javascripts/app.js")'></script>
        <script type='text/javascript' src='@routes.Assets.at("javascripts/services/OfficeService.js")'></script>
        <script type='text/javascript' src='@routes.Assets.at("javascripts/services/EmployeeService.js")'></script>
        <script type='text/javascript' src='@routes.Assets.at("javascripts/services/FunctionsService.js")'></script>
        <script type='text/javascript' src='@routes.Assets.at("javascripts/services/ContractService.js")'></script>
        <script type='text/javascript' src='@routes.Assets.at("javascripts/services/DepartmentService.js")'></script>
        <script type='text/javascript' src='@routes.Assets.at("javascripts/services/RelationshipService.js")'></script>
        <script type='text/javascript' src='@routes.Assets.at("javascripts/services/PositionService.js")'></script>
        <script type='text/javascript' src='@routes.Assets.at("javascripts/services/InstitutionService.js")'></script>
        <script type='text/javascript' src='@routes.Assets.at("javascripts/controllers/EmployeeController.js")'></script>

        <script type="text/javascript">
        $ ( function ( ) {
            @*var ws = new WebSocket("@routes.Application.serverStatus.webSocketURL()");*@
        var ws = new ReconnectingWebSocket ( "ws://localhost:9001/connection/status" ) ;
        ws.onmessage = function ( msg ) {
        $ ( '#server-status' ).text ( msg.data ) ;
        $ ( '#server-status' ).addClass ( 'label label-success' ).removeClass ( 'label-warning' ) ;
        }
        ws.onclose = function ( msg ) {
        $ ( '#server-status' ).text ( 'closed' ) ;
        $ ( '#server-status' ).addClass ( 'label-warning' ).removeClass ( 'label-success' ) ;
        }
        } )
        </script>

    </body>
</html>
